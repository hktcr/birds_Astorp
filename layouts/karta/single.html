{{ define "main" }}
<div class="map-page">
    <div class="map-header">
        <h1 class="page-title">Observationskarta</h1>
        <p class="map-intro">Fåglar observerade i Åstorps kommun 2026</p>
        <div class="map-stats">
            <a href="{{ `artguide/` | relURL }}?filter=checked" class="map-stat-link"><strong
                    id="species-count">0</strong> arter</a>
        </div>
    </div>

    <div id="map" class="observation-map"></div>

    <div class="map-legend">
        <div class="legend-items">
            <span class="legend-item">
                <span class="legend-marker" style="background: #dc2626;"></span>
                Observationsplats
            </span>
            <span class="legend-item">
                <span class="legend-marker legend-pulse"
                    style="background: #dc2626; animation: legend-pulse 1.5s ease-out infinite;"></span>
                Senaste observation
            </span>
        </div>
    </div>
</div>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Pass baseURL to JavaScript -->
<script>
    window.siteBaseURL = '{{ .Site.BaseURL }}';
</script>

<!-- Map initialization -->
<script src="{{ "js/map.js" | relURL }}"></script>
{{ end }}