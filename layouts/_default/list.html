{{ define "main" }}
<section class="archive-page">
    <h1 class="page-title">{{ .Title }}</h1>

    {{ if .Content }}
    <div class="page-intro prose">
        {{ .Content }}
    </div>
    {{ end }}

    {{ $posts := where .Site.RegularPages "Section" "posts" }}

    <div class="archive-timeline">
        {{ range $posts }}
        <article class="archive-item">
            <time datetime="{{ .Date.Format " 2006-01-02" }}" class="archive-date">
                {{ .Date.Format "2 Jan" }}
            </time>
            <div class="archive-card">
                {{ if .Params.image }}
                <div class="archive-thumb">
                    <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" loading="lazy">
                </div>
                {{ else }}
                <div class="archive-thumb archive-thumb--fallback">
                    <span class="archive-thumb__date">{{ .Date.Format "2 Jan" }}</span>
                </div>
                {{ end }}
                <div class="archive-card__body">
                    <h2 class="archive-title">
                        <a href="{{ .Permalink }}" class="archive-card__link">{{ .Title }}</a>
                    </h2>
                    {{ with .Params.location }}
                    <span class="archive-location">üìç {{ . }}</span>
                    {{ end }}
                    <p class="archive-summary">{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate
                        120 }}{{ end }}</p>
                    {{ with .Params.tags }}
                    <div class="archive-tags">
                        {{ range (first 3 .) }}
                        <span class="archive-tag">{{ . }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
            </div>
        </article>
        {{ end }}
    </div>

    {{ if eq (len $posts) 0 }}
    <p class="empty-state">Inga inl√§gg √§nnu. H√•ll utkik!</p>
    {{ end }}
</section>
{{ end }}