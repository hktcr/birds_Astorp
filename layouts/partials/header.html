<header class="site-header">
    <div class="header-container">
        <a href="{{ .Site.BaseURL }}" class="site-logo">
            <span class="site-title">{{ .Site.Title }}</span>
        </a>


        <nav class="main-nav" aria-label="Huvudnavigation">
            <ul class="nav-list">
                {{ range .Site.Menus.main }}
                <li class="nav-item">
                    <a href="{{ .URL }}" class="nav-link{{ if $.IsMenuCurrent " main" . }} active{{ end }}">
                        {{ .Name }}
                    </a>
                </li>
                {{ end }}
            </ul>
        </nav>

        <button class="mobile-menu-toggle" aria-label="Ã–ppna meny" aria-expanded="false" id="mobile-menu-btn">
            <span class="hamburger"></span>
        </button>
    </div>
</header>

<script>
    // Inline script to ensure mobile menu works without caching issues/external request delays
    document.addEventListener('DOMContentLoaded', () => {
        const menuToggle = document.getElementById('mobile-menu-btn');
        const mainNav = document.querySelector('.main-nav');

        if (menuToggle && mainNav) {
            menuToggle.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();

                // Toggle classes
                mainNav.classList.toggle('open');

                // Update aria
                const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                menuToggle.setAttribute('aria-expanded', !isExpanded);
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (mainNav.classList.contains('open') &&
                    !mainNav.contains(e.target) &&
                    !menuToggle.contains(e.target)) {
                    mainNav.classList.remove('open');
                    menuToggle.setAttribute('aria-expanded', 'false');
                }
            });
        }
    });
</script>